<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Message</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"/>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background-color: #000014;
      color: #0f0;
      font-family: 'Press Start 2P', cursive;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100dvh;
      overflow: hidden;
    }

    .starfield {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -1;
    }

    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      opacity: 0.6;
      animation: twinkle 5s ease-in-out infinite;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.3); }
    }

    .message-box {
      background: linear-gradient(to bottom, #223322, #112211);
      border: 4px solid #333;
      border-radius: 20px;
      box-shadow: inset 0 0 10px #000;
      color: #8aff70;
      padding: 20px 16px;
      width: 350px;
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      scroll-behavior: smooth;
      position: relative;
    }

    .message-title {
      font-size: 26px;
      text-align: center;
      width: 100%;
      margin-bottom: 20px;
      color: #0f0;
    }

    .message-text {
      font-size: 12px;
      line-height: 1.5;
      color: #6bf84b;
      white-space: pre-wrap;
      word-wrap: break-word;
      text-align: left;
      display: inline-block;
      padding-right: 20px;
      width: 100%;
    }

    .blinking-cursor {
      display: inline-block;
      width: 10px;
      height: 1em;
      background-color: #6bf84b;
      animation: blink 0.8s steps(2, start) infinite;
      vertical-align: bottom;
    }

    @keyframes blink {
      to {
        visibility: hidden;
      }
    }

    .skip-button {
      background-color: #0d64bb;
      color: white;
      border: none;
      padding: 8px 18px;
      font-size: 14px;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 8px #072e55;
      align-self: center;
      margin-top: 20px;
      font-weight: bold;
    }

    .nav-buttons {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      gap: 12px;
      margin-top: -60px;
    }

    .next-button,
    .back-button {
      background-color: #00bc29;
      color: white;
      border: none;
      padding: 15px 20px;
      border-radius: 10px;
      font-size: 14px;
      cursor: pointer;
      flex: 1;
      text-align: center;
      font-weight: bold;
    }

    .back-button {
      background-color: #d61702;
    }

    .next-button:hover {
      background-color: #00e900;
    }

    .back-button:hover {
      background-color: #ff3333;
    }

    @media (max-width: 480px) {
  .next-button,
  .back-button {
    font-size: 16px;
    padding: 12px 20px;
  }
  .message-title {
    font-size: 18px;
  }
  .message-text {
    font-size: 10px;
  }
  .skip-button {
    font-size: 10px;
    padding: 8px 14px;
  }
}

    .frame {
      background: #eaeaea;
      border-radius: 20px;
      padding: 20px 20px 30px;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 380px;
      height: 540px;
      box-shadow: inset -4px -4px 6px #ccc, inset 4px 4px 6px #fff;
      gap: 80px;
    }
    
  </style>
</head>
<body>
  <div class="starfield"></div>

  <audio id="clickSound" src="click.wav" preload="auto"></audio>
  <audio id="typeSound" src="type-sound.mp3" preload="auto" muted></audio>

  <div class="frame">
    <div class="message-box">
      <div class="message-title">Message</div>
      <div class="message-text" id="message">
        <span id="cursor" class="blinking-cursor">&nbsp;</span>
      </div>
      <button class="skip-button" id="skipButton" onclick="handleSkipOrStart()">MULAI</button>
    </div>

    <div class="nav-buttons">
      <button class="next-button" onclick="goNext()">SELANJUTNYA</button>
      <button class="back-button" onclick="goBack()">KEMBALI</button>
    </div>
  </div>

  <script>
    const message = `Hai Cengg,\nHappy Birthday!

Maaf yaa aku telat ngucapinnya, tapi bukan berarti aku lupa. Aku selalu inget hari spesial kamu.

Selamat ulang tahun yaa, Ceng. Aku doain semoga kamu sehat selalu, dilancarkan rezekinya, dimudahkan segala urusannya, selalu dikelilingi hal-hal yang bikin kamu bahagia, dan makin dekat terus sama Allah, Aamiinnn. Pokoknya aku doain semua yang terbaik buat kamu.

Maaf juga aku nggk bisa ngucapin secara langsung. tapi jujur, aku pengen banget ngucapin ke kamu secara langsung. Tapi yaa, mungkin ini cara terbaik yang bisa aku pilih sekarang. Jadi aku ngucapin lewat codinganku aja, hehe.

Cengg, makasih yaa udah hadir di hidupku. Makasih karena kamu udah bantuin aku menjadi orang yang lebih baik, makasih juga karena kamu udah ngasih warna di hari-hariku. Aku bersyukur banget pernah punya kesempatan bareng sama kamu, aku juga senang banget bisa berbagi cerita, pengalaman, dan tawaku bareng kamu. Itu semua berarti banget buat aku. Makasih Cengg

Dan terakhir…
Aku harap hadiah kecilku ini bisa bikin kamu tersenyum. Walau cuma sebentar, Tapi ini tulus dari aku.
I love you Ceng.`;

    const messageContainer = document.getElementById("message");
    const typeSound = document.getElementById("typeSound");
    const clickSound = document.getElementById("clickSound");
    const skipBtn = document.getElementById("skipButton");

    messageContainer.innerHTML = '<span id="cursor" class="blinking-cursor">&nbsp;</span>';

    let index = 0;
    let typingInterval;
    let startedTyping = false;

    function playClick() {
      clickSound.currentTime = 0;
      clickSound.play();
    }

    function typeText() {
      typeSound.loop = true;
      typeSound.currentTime = 0;
      typeSound.volume = 0.4;
      typeSound.play();

      typingInterval = setInterval(() => {
        if (index < message.length) {
          messageContainer.innerHTML =
            message.slice(0, index + 1).replace(/\n/g, "<br>") +
            '<span id="cursor" class="blinking-cursor"></span>';
          index++;
        } else {
          clearInterval(typingInterval);
          typeSound.pause();
          messageContainer.innerHTML = message.replace(/\n/g, "<br>");
          skipBtn.style.display = "none";
        }
      }, 60);
    }

    function handleSkipOrStart() {
      playClick();
      if (!startedTyping) {
        startedTyping = true;
        initAudio();
        skipBtn.textContent = "SKIP";
        typeText();
      } else {
        clearInterval(typingInterval);
        typeSound.pause();
        messageContainer.innerHTML = message.replace(/\n/g, "<br>");
        skipBtn.style.display = "none";
      }
    }

    function goNext() {
      playClick();
      setTimeout(() => {
        window.location.href = 'gallery.html';
      }, 150);
    }

    function goBack() {
      playClick();
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 150);
    }

    let audioInitialized = false;
    function initAudio() {
      if (!audioInitialized) {
        typeSound.muted = false;
        typeSound.play().then(() => {
          audioInitialized = true;
        }).catch(() => {});
      }
    }

    const starCount = 100;
    const starfield = document.querySelector('.starfield');
    for (let i = 0; i < starCount; i++) {
      const star = document.createElement('div');
      star.classList.add('star');
      star.style.left = `${Math.random() * window.innerWidth}px`;
      star.style.top = `${Math.random() * window.innerHeight}px`;
      star.style.animationDuration = `${Math.random() * 4 + 4}s`;
      star.style.animationDelay = `${Math.random() * 3}s`;
      starfield.appendChild(star);
    }
  </script>
</body>
</html>
